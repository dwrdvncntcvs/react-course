{"ast":null,"code":"//api/new-meetup\nimport { Schema, connect, model, connection } from \"mongoose\";\n\nasync function handler(req, res) {\n  switch (req.method) {\n    case \"POST\":\n      console.log(\"Creating data...\");\n      const {\n        title,\n        image,\n        address,\n        description\n      } = req.body;\n\n      try {\n        const db = await connect(\"mongodb://localhost/next_db\");\n        const meetupSchema = new db.Schema({\n          title: String,\n          image: String,\n          address: String,\n          description: String\n        });\n        const MeetUp = db.model(\"MeetUp\", meetupSchema);\n        const result = await MeetUp.create({\n          title,\n          image,\n          address,\n          description\n        });\n        console.log(\"Result: \", result);\n        connection.close();\n        res.status(201).send({\n          message: \"Meetup created\",\n          result\n        });\n      } catch (err) {\n        console.log(\"Error: \", err.message);\n      }\n\n    default:\n      return;\n  }\n}\n\nexport default handler;","map":{"version":3,"sources":["D:/Builds/Tutorials/React/Section 23/meetup-app/pages/api/new-meetup.js"],"names":["Schema","connect","model","connection","handler","req","res","method","console","log","title","image","address","description","body","db","meetupSchema","String","MeetUp","result","create","close","status","send","message","err"],"mappings":"AAAA;AACA,SAASA,MAAT,EAAiBC,OAAjB,EAA0BC,KAA1B,EAAiCC,UAAjC,QAAmD,UAAnD;;AAEA,eAAeC,OAAf,CAAuBC,GAAvB,EAA4BC,GAA5B,EAAiC;AAC/B,UAAQD,GAAG,CAACE,MAAZ;AACE,SAAK,MAAL;AACEC,MAAAA,OAAO,CAACC,GAAR,CAAY,kBAAZ;AACA,YAAM;AAAEC,QAAAA,KAAF;AAASC,QAAAA,KAAT;AAAgBC,QAAAA,OAAhB;AAAyBC,QAAAA;AAAzB,UAAyCR,GAAG,CAACS,IAAnD;;AAEA,UAAI;AACF,cAAMC,EAAE,GAAG,MAAMd,OAAO,CAAC,6BAAD,CAAxB;AAEA,cAAMe,YAAY,GAAG,IAAID,EAAE,CAACf,MAAP,CAAc;AACjCU,UAAAA,KAAK,EAAEO,MAD0B;AAEjCN,UAAAA,KAAK,EAAEM,MAF0B;AAGjCL,UAAAA,OAAO,EAAEK,MAHwB;AAIjCJ,UAAAA,WAAW,EAAEI;AAJoB,SAAd,CAArB;AAOA,cAAMC,MAAM,GAAGH,EAAE,CAACb,KAAH,CAAS,QAAT,EAAmBc,YAAnB,CAAf;AAEA,cAAMG,MAAM,GAAG,MAAMD,MAAM,CAACE,MAAP,CAAc;AACjCV,UAAAA,KADiC;AAEjCC,UAAAA,KAFiC;AAGjCC,UAAAA,OAHiC;AAIjCC,UAAAA;AAJiC,SAAd,CAArB;AAOAL,QAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ,EAAwBU,MAAxB;AAEAhB,QAAAA,UAAU,CAACkB,KAAX;AACAf,QAAAA,GAAG,CAACgB,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAAEC,UAAAA,OAAO,EAAE,gBAAX;AAA6BL,UAAAA;AAA7B,SAArB;AACD,OAvBD,CAuBE,OAAOM,GAAP,EAAY;AACZjB,QAAAA,OAAO,CAACC,GAAR,CAAY,SAAZ,EAAuBgB,GAAG,CAACD,OAA3B;AACD;;AACH;AACE;AAhCJ;AAkCD;;AAED,eAAepB,OAAf","sourcesContent":["//api/new-meetup\r\nimport { Schema, connect, model, connection } from \"mongoose\";\r\n\r\nasync function handler(req, res) {\r\n  switch (req.method) {\r\n    case \"POST\":\r\n      console.log(\"Creating data...\");\r\n      const { title, image, address, description } = req.body;\r\n\r\n      try {\r\n        const db = await connect(\"mongodb://localhost/next_db\");\r\n\r\n        const meetupSchema = new db.Schema({\r\n          title: String,\r\n          image: String,\r\n          address: String,\r\n          description: String,\r\n        });\r\n\r\n        const MeetUp = db.model(\"MeetUp\", meetupSchema);\r\n\r\n        const result = await MeetUp.create({\r\n          title,\r\n          image,\r\n          address,\r\n          description,\r\n        });\r\n\r\n        console.log(\"Result: \", result);\r\n\r\n        connection.close();\r\n        res.status(201).send({ message: \"Meetup created\", result });\r\n      } catch (err) {\r\n        console.log(\"Error: \", err.message);\r\n      }\r\n    default:\r\n      return;\r\n  }\r\n}\r\n\r\nexport default handler;\r\n"]},"metadata":{},"sourceType":"module"}